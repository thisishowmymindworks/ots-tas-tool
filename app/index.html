<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
	<title>OTS TAS Tool</title>
	<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
	<link rel="stylesheet" href="..\node_modules\uikit\dist\css\uikit.min.css">
	<link rel="stylesheet" href="..\node_modules\dragula\dist\dragula.min.css">
	<link rel="stylesheet" href="style.css">
</head>
<body onwheel="return true;">
	<!-- NAVBAR -->
	<nav class="uk-navbar-container uk-dark drag" uk-navbar="mode: click;">
		<div class="uk-navbar-left no-drag">
			<ul class="uk-navbar-nav">

				<li class="uk-margin-left">
					<a href="#">File</a>
					<div class="uk-navbar-dropdown uk-margin-remove-top">
						<ul class="uk-nav uk-navbar-dropdown-nav">
              <li><a href="#" onclick="newFile()">New</a></li>
              <li><a href="#" onclick="save()">Save</a></li>
              <li><a href="#" onclick="saveAs()">Save as</a></li>
							<li class="uk-nav-divider"></li>
							<li><a href="#" onclick="loadFromFile()">Open</a></li>
							<li class="uk-nav-divider"></li>
							<li><a href="#" onclick="exit()">Exit</a></li>
            </ul>
					</div>
				</li>


				<li>
					<a href="#">Edit</a>
					<div class="uk-navbar-dropdown uk-margin-remove-top">
						<ul class="uk-nav uk-navbar-dropdown-nav">
							<li><a href="#" onclick="addAction()">Add action</a></li>
							<li><a href="#" onclick="addComment()">Add comment</a></li>
						</ul>
					</div>
				</li>

				<li>
					<a href="#">Instal/run</a>
					<div class="uk-navbar-dropdown uk-margin-remove-top">
						<ul class="uk-nav uk-navbar-dropdown-nav">
							<li><a href="#" onclick="runTAS(true)">Compile TAS and run OTS</a></li>
							<li><a href="#" onclick="runTAS(false)">Run OTS (no compilation)</a></li>
							<li class="uk-nav-divider"></li>
							<li><a href="#" onclick="install_components()">Install TAS components</a></li>
							<li><a href="#" onclick="uninstall_components()">Uninstall TAS components</a></li>
						</ul>
					</div>
				</li>

				<li>
					<a href="#" onclick="open_settings_menu()">Settings</a>
				</li>
			</ul>
		</div>

		<div class="uk-navbar-right no-drag">
			<ul style="font-size:3em" class="uk-navbar-nav">
				<li><a href="#" id="menu_minimize" onclick="window_minimize()">&#x1f5d5;</a></li>
				<li><a href="#" id="menu_maximize" onclick="window_maximize()">&#x1f5d6;</a></li>
				<li><a href="#" if="menu_exit" onclick="exit()">&#x1f5d9;</a></li>
			</ul>
		</div>
	</nav>

	<!-- SETTINGS MODAL -->
	<div id="settings_modal" class="no-drag uk-modal-container" uk-modal>
		<div class="uk-modal-dialog">
			<!-- TOP RIGHT CLOSE BUTTON -->
			<button class="uk-modal-close-default" type="button" uk-close></button>
			<!-- MODAL HEADER -->
			<div class="uk-modal-header">
				<h1 class="uk-modal-title">Settings</h1>
			</div>
			<!-- MODAL BODY -->
			<div class="uk-modal-body settings-container">
				<div class="form-border-header">
					<span>OTS version:</span>
					<select class="uk-select uk-form-width-medium" id="use-which-ots" onchange="$('.settings_tab').hide();$('#settings_tab_'+event.target.value).show()">
						<option value="steam">Steam</option>
						<option value="itch">Itch.io</option>
					</select>
				</div>

				<div class="settings-tab-container uk-margin-bottom">
					<div class="settings-tab uk-margin-top" id="settings-tab-steam">
						<div class="settings-row">
							<input data-path-type="otsPath" class="uk-input" type="text" disabled>
							<button type="button" data-action="set-path" class="uk-button uk-button-default">Set OTS path</button>
						</div>
						<div class="settings-row">
							<input data-path-type="savefilePath" class="uk-input" type="text" disabled>
							<button type="button" data-action="set-path" class="uk-button uk-button-default">Set savefile path</button>
						</div>
					</div>

					<div class="settings-tab uk-margin-top" id="settings-tab-itch">
						<div class="settings-row">
							<input data-path-type="otsPath" class="uk-input" type="text" disabled>
							<button type="button" data-action="set-path" class="uk-button uk-button-default">Set OTS path</button>
						</div>
						<div class="settings-row">
							<input data-path-type="savefilePath" class="uk-input" type="text" disabled>
							<button type="button" data-action="set-path" class="uk-button uk-button-default">Set savefile path</button>
						</div>
					</div>
				</div>

				<div class="settings-tab-container uk-margin-bottom">
					<div class="settings-row">
						<input class="uk-input" data-path-type="ffdecPath" type="text" disabled>
						<button type="button" data-action="set-path" class="uk-button uk-button-default">Set ffdec path</button>
					</div>
				</div>
			</div>
			<!-- MODAL FOOTER -->
			<div class="uk-modal-footer uk-text-right">
				<button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
        <button class="uk-button uk-button-primary" onclick="save_settings()" type="button">Save changes</button>
			</div>
		</div>
	</div>

	<!-- TEMPLATE SAVES MODAL -->
	<div id="template_save_modal" class="no-drag uk-modal-container" uk-modal>
		<div class="uk-modal-dialog">
			<!-- TOP RIGHT CLOSE BUTTON -->
			<button class="uk-modal-close-default" type="button" uk-close></button>
			<!-- MODAL HEADER -->
			<div class="uk-modal-header">
				<h1 class="uk-modal-title">Template save files</h1>
			</div>
			<!-- MODAL BODY -->
			<div class="uk-modal-body">
				<table class="uk-table uk-table-large uk-table-divider" id="template_savefiles_table">
					<thead>
						<tr class="uk-text-large">
							<th class="uk-table-expand"><span class="uk-text-large">Name</span></th>
							<th class="uk-width-1-6"><span class="uk-text-large">File</span></th>
							<th class="uk-width-small"><span class="uk-text-large">Delete</span></th>
						</tr>
					</thead>
					<tbody>
						<!-- TBODY -->
					</tbody>
				</table>
				<div class="uk-text-right">
					<button type="button" class="uk-button uk-button-primary" id="template_save_add" onclick="add_template_save()">Add new templatesave</button>
				</div>
			</div>
			<!-- MODAL FOOTER -->
			<div class="uk-modal-footer uk-text-right">
				<button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
				<button class="uk-button uk-button-primary" onclick="template_saves_save_changes()" type="button">Save changes</button>
			</div>
		</div>
	</div>

<!-- MAIN -->
	<main class="uk-container uk-container-large">
		<div style="display:none" id="small_message_container">
			<span id="small_message">That's not the correct file, please select ffdec.bat for windows, and ffdec.sh for linux/mac.</span>
			<span style="cursor:pointer;color:darkred;" onclick="$('#small_message_container').slideUp()" class="glyphicon glyphicon-remove"></span>
		</div>

		<div class="container">

			<h1 class="uk-text-center uk-heading-line uk-margin-top"><span>Out There Somewhere TAS Tool</span></h1>

			<div class="uk-section uk-section-muted uk-section-small uk-flex uk-flex-around">

				<div class="uk-placeholder uk-margin-remove uk-padding-small uk-flex uk-flex-middle">
					<span class="uk-text-bold uk-margin-small-right">Final boss start frame:</span>
					<input class="uk-input uk-form-width-small uk-text-center" min="1" type="number" id="boss_frame1">
				</div>

				<div class="uk-placeholder uk-margin-remove uk-padding-small uk-flex uk-flex-middle">
					<span class="uk-text-bold uk-margin-small-right" id="lbl_dialogue_skipping">Dialogue skipping:</span>
					<input class="uk-checkbox cb-dialogue-skipping large-checkbox" type="checkbox" id="cb_dialogue_skipping">
					<div class="uk-form-width-small skip-frame-container">
						<input class="uk-input uk-form-width-small uk-text-center skip-frame-input" min="0" type="number" id="skip_frame" value="1">
					</div>
    		</div>

				<div class="uk-placeholder uk-margin-remove uk-padding-small uk-flex uk-flex-middle">
					<span class="uk-text-bold uk-margin-small-right uk-text-nowrap">Template save:</span>
					<select id="ddl_template_save" class="uk-select uk-width-small">
						<option value="none">None</option>
						<option value="clear">Clear</option>
					</select>
					<button type="button" class="uk-button uk-button-primary uk-margin-small-left" onclick="template_saves_edit_click()">Edit</button>
				</div>
			</div>


			<table class="uk-table uk-text-center uk-table-divider">
				<thead>
					<tr class="uk-text-large">
						<th class="uk-width-small"></th>
						<th class="uk-width-small"><span class="uk-text-large">Frame</span></th>
						<th class="uk-width-small"><span class="uk-text-large">Horizontal</span></th>
						<th class="uk-width-small"><span class="uk-text-large">Vertical</span></th>
						<th class="uk-width-small"><span class="uk-text-large">Teleshot</span></th>
						<th class="uk-width-small"><span class="uk-text-large">Gauss</span></th>
						<th class="uk-width-small"><span class="uk-text-large">Jump</span></th>
						<th class="uk-width-small uk-text-nowrap"><span class="uk-text-large">Custom jump</span></th>
						<th class="uk-width-small"></th>
					</tr>
				</thead>
				<tbody id="tas-table-tbody">

				</tbody>
			</table>

			<table style="visibility: hidden" class="uk-table uk-text-center">
				<thead>
				<tr class="uk-text-large">
					<th class="uk-width-small"></th>
					<th class="uk-width-small"><span class="uk-text-large">Frame</span></th>
					<th class="uk-width-small"><span class="uk-text-large">Horizontal</span></th>
					<th class="uk-width-small"><span class="uk-text-large">Vertical</span></th>
					<th class="uk-width-small"><span class="uk-text-large">Teleshot</span></th>
					<th class="uk-width-small"><span class="uk-text-large">Gauss</span></th>
					<th class="uk-width-small"><span class="uk-text-large">Jump</span></th>
					<th class="uk-width-small uk-text-nowrap"><span class="uk-text-large">Custom jump</span></th>
					<th class="uk-width-small"></th>
				</tr>
			</thead>
			<tbody id="tas-table-tbody-mirror">

			</tbody>
			</table>
		</div>
	</main>

	<template id="template-action-row">
		<tr class="entry action">
			<td class="drag-handle uk-text-middle uk-width-small">☰</td>
			<td class="uk-width-small uk-text-center">
				<input class="frame-input uk-input uk-form-width-small uk-text-center" uk-tooltip="Frame Number" type="number" min="1" value="1">
			</td>
			<td class="uk-width-small uk-text-center">
				<select class="hor uk-select uk-width-small" uk-tooltip="Horizontal">
					<option value="none">None</option>
					<option value="-1">Left</option>
					<option value="1">Right</option>
					<option value="0">Stop</option>
				</select>
			</td>
			<td class="uk-width-small uk-text-center">
				<select class="ver uk-select uk-width-small" uk-tooltip="Vertical">
					<option value="none">None</option>
					<option value="-1">Up</option>
					<option value="1">Down</option>
					<option value="0">Stop</option>
				</select>
			</td>
			<td class="uk-width-small uk-text-center">
				<input class="tele uk-checkbox large-checkbox" uk-tooltip="Teleshot" type="checkbox" value="true">
			</td>
			<td class="uk-width-small uk-text-center">
				<input class="gauss uk-checkbox large-checkbox" uk-tooltip="Gauss Gun" type="checkbox" value="true">
			</td>
			<td class="uk-width-small uk-text-center">
				<input class="jump uk-checkbox large-checkbox" uk-tooltip="Jump" type="checkbox" value="true">
			</td>
			<td class="uk-width-small uk-text-center">
				<select class="custom-jump uk-select uk-width-small" uk-tooltip="Custom Jump">
					<option value="none">None</option>
					<option value="true">Start</option>
					<option value="false">Stop</option>
				</select>
			</td>
			<td class="uk-width-small uk-text-center uk-text-middle">
				<a class="uk-icon uk-icon-link" uk-tooltip="Duplicate" data-action="duplicate" uk-icon="icon: copy; ratio: 1.6"></a>
				<a class="uk-icon uk-icon-link uk-margin-small-left" data-action="delete" uk-tooltip="Delete" style="color:darkred;" uk-icon="icon: trash; ratio: 1.7"></a>
			</td>
		</tr>
	</template>

	<template id="template-comment-row">
		<tr class="entry comment">
			<td class="drag-handle uk-text-middle">☰</td>
			<td colspan="7" class="uk-width-large">
				<input class="comment-input uk-input uk-text-large" value="">
			</td>
			<td class="uk-width-small uk-text-center uk-text-middle">
				<a class="uk-icon uk-icon-link uk-margin-small-left" data-action="delete" uk-tooltip="Delete" style="color:darkred;" uk-icon="icon: trash; ratio: 1.7"></a>
			</td>
		</tr>
	</template>

	<!-- SCRIPTS/ETC -->
	<script>
	// FOR DEBUGGING!
	document.addEventListener("keydown", function (e) {
		if (e.which === 123) {
			remote.getCurrentWindow().toggleDevTools();
		} else if (e.which === 116) {
			location.reload();
		}
	});
	</script>
	<script src="settings.js"></script>
	<script src="utils.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script src="..\node_modules\dragula\dist\dragula.min.js"></script>
	<script src="..\node_modules\uikit\dist\js\uikit.min.js"></script>
	<script src="..\node_modules\uikit\dist\js\uikit-icons.min.js"></script>
	<script src="save_load.js"></script>
	<script src="run_compile.js"></script>
	<script src="edit.js"></script>
	<script src="template_saves.js"></script>
</body>
</html>
